<template>
  <aside :class="{ 'sideBarExpanded': isExpanded }" class="sidebar">
    <!-- <div class="flex flex-col gap-5 relative px-4 w-[214px]"> -->
    <div class="sidebar-head">
      <div class="flex justify-between items-start px-4 gap-2 w-full">
        <div class="w-6 h-6">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.25289 0H9.28203C9.36544 0 9.44087 0.0496125 9.47389 0.126208L13.9117 10.4468L18.3495 0.126208C18.3825 0.0496125 18.4579 0 18.5413 0H26.5705C26.7566 0 26.8481 0.227071 26.7169 0.359092C25.2319 1.85307 23.8937 3.25446 22.6806 4.52493C18.6382 8.75815 15.9838 11.5828 13.9117 11.4915C11.8395 11.5828 9.18514 8.75815 5.14282 4.52494C3.92963 3.25446 2.59144 1.85307 1.10647 0.359092C0.97524 0.227071 1.06674 0 1.25289 0Z"
              class="fill-accent-1" />
            <path
              d="M1.25289 28H9.28203C9.36544 28 9.44087 27.9504 9.47389 27.8738L13.9117 17.5532L18.3495 27.8738C18.3825 27.9504 18.4579 28 18.5413 28H26.5705C26.7566 28 26.8481 27.7729 26.7169 27.6409C25.2319 26.1469 23.8937 24.7455 22.6806 23.4751C18.6382 19.2418 15.9838 16.4172 13.9117 16.5085C11.8395 16.4172 9.18514 19.2418 5.14282 23.4751C3.92963 24.7455 2.59144 26.1469 1.10647 27.6409C0.97524 27.7729 1.06674 28 1.25289 28Z"
              class="fill-accent-1" />
            <path
              d="M28 1.44548V9.47451C28 9.55792 27.9504 9.63334 27.8738 9.66637L17.553 14.1041L27.8738 18.5418C27.9504 18.5748 28 18.6503 28 18.7337V26.7627C28 26.9488 27.7729 27.0403 27.6409 26.9091C26.1469 25.4242 24.7455 24.086 23.475 22.8728C19.2417 18.8306 16.417 16.1761 16.5083 14.1041C16.417 12.032 19.2417 9.37762 23.475 5.33536C24.7455 4.12219 26.1469 2.78402 27.6409 1.29906C27.7729 1.16784 28 1.25934 28 1.44548Z"
              class="fill-accent-1" />
            <path
              d="M1.10667e-06 1.44548L7.55701e-07 9.47451C7.52055e-07 9.55792 0.0496139 9.63334 0.126211 9.66637L10.447 14.1041L0.12621 18.5418C0.0496136 18.5748 3.54611e-07 18.6503 3.50965e-07 18.7337L0 26.7627C-8.13671e-09 26.9488 0.227074 27.0403 0.359097 26.9091C1.8531 25.4242 3.25451 24.086 4.525 22.8728C8.75828 18.8306 11.583 16.1761 11.4917 14.1041C11.583 12.032 8.75828 9.37762 4.525 5.33536C3.25451 4.12219 1.8531 2.78402 0.359099 1.29906C0.227076 1.16784 1.1148e-06 1.25934 1.10667e-06 1.44548Z"
              class="fill-accent-1" />
            <path
              d="M15.6705 13.9825C15.6705 14.9056 14.9221 15.6539 13.999 15.6539C13.0758 15.6539 12.3275 14.9056 12.3275 13.9825C12.3275 13.0593 13.0758 12.311 13.999 12.311C14.9221 12.311 15.6705 13.0593 15.6705 13.9825Z"
              class="fill-accent-2" />
          </svg>

        </div>
        <div class="expandButton" :class="{ 'expandButtonExpanded': isExpanded }" @click="expandSideNav">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="9.5" class="fill-bkg-secondary stroke-bkg-tertiary" />
            <path
              d="M8.63645 5.84362C8.59134 5.79589 8.55608 5.73974 8.53267 5.67837C8.50926 5.61701 8.49817 5.55163 8.50003 5.48598C8.50188 5.42033 8.51665 5.35569 8.54349 5.29575C8.57033 5.2358 8.60872 5.18173 8.65645 5.13662C8.70419 5.09152 8.76034 5.05625 8.8217 5.03284C8.88307 5.00943 8.94844 4.99834 9.01409 5.0002C9.07974 5.00206 9.14439 5.01683 9.20433 5.04367C9.26427 5.07051 9.31834 5.10889 9.36345 5.15662L13.6135 9.65662C13.7012 9.74946 13.7501 9.87237 13.7501 10.0001C13.7501 10.1279 13.7012 10.2508 13.6135 10.3436L9.36345 14.8441C9.31864 14.8929 9.26458 14.9323 9.20442 14.96C9.14426 14.9877 9.07919 15.0032 9.01299 15.0056C8.94679 15.0079 8.88079 14.9971 8.81881 14.9737C8.75683 14.9503 8.70011 14.9149 8.65195 14.8694C8.60379 14.8239 8.56515 14.7693 8.53826 14.7088C8.51138 14.6483 8.4968 14.583 8.49535 14.5168C8.49391 14.4505 8.50564 14.3847 8.52986 14.323C8.55409 14.2614 8.59032 14.2052 8.63645 14.1576L12.5625 10.0001L8.63645 5.84362Z"
              class="fill-label-primary" />
          </svg>
        </div>
        <!-- <img :class="{ 'expandButtonExpanded': isExpanded }" @click="expandSideNav" alt="ateri logo" class="expandButton"
          src="../../assets/expand-btn.svg" width="125" height="125" /> -->
      </div>
    </div>
    <div class="sidebar-body">
      <SideNavIcon :isExpanded="isExpanded" :isActive="isDashboardActive" :route="{ name: 'dashboard' }"
        menuName="Dashboard"
        path="M4.47998 1.6001H4.39998C4.03358 1.6001 3.71838 1.6001 3.43998 1.6657C3.00899 1.76868 2.61494 1.98897 2.30146 2.30216C1.98799 2.61535 1.76735 3.00921 1.66398 3.4401C1.59998 3.7185 1.59998 4.0321 1.59998 4.4001V8.4001C1.59998 8.7665 1.59998 9.0817 1.66558 9.3601C1.76856 9.79108 1.98885 10.1851 2.30204 10.4986C2.61523 10.8121 3.00909 11.0327 3.43998 11.1361C3.71838 11.2001 4.03198 11.2001 4.39998 11.2001H8.39998C8.76638 11.2001 9.08158 11.2001 9.35998 11.1345C9.79096 11.0315 10.185 10.8112 10.4985 10.498C10.812 10.1848 11.0326 9.79099 11.136 9.3601C11.2 9.0817 11.2 8.7681 11.2 8.4001V4.4001C11.2 4.0337 11.2 3.7185 11.1344 3.4401C11.0314 3.00912 10.8111 2.61506 10.4979 2.30159C10.1847 1.98812 9.79087 1.76747 9.35998 1.6641C9.08158 1.6001 8.76798 1.6001 8.39998 1.6001H8.31998H4.47998ZM3.81278 3.2225C3.88158 3.2065 3.98878 3.2001 4.47998 3.2001H8.31998C8.81278 3.2001 8.91838 3.2049 8.98718 3.2225C9.1309 3.25687 9.2623 3.33038 9.3668 3.43487C9.4713 3.53937 9.54481 3.67077 9.57918 3.8145C9.59518 3.8817 9.59998 3.9873 9.59998 4.4801V8.3201C9.59998 8.8129 9.59518 8.9185 9.57758 8.9873C9.54321 9.13103 9.4697 9.26242 9.3652 9.36692C9.2607 9.47142 9.1293 9.54493 8.98558 9.5793C8.91998 9.5937 8.81438 9.6001 8.31998 9.6001H4.47998C3.98718 9.6001 3.88158 9.5953 3.81278 9.5777C3.66905 9.54333 3.53765 9.46982 3.43315 9.36532C3.32866 9.26082 3.25515 9.12943 3.22078 8.9857C3.20638 8.9201 3.19998 8.8145 3.19998 8.3201V4.4801C3.19998 3.9873 3.20478 3.8817 3.22238 3.8129C3.25675 3.66917 3.33026 3.53777 3.43475 3.43327C3.53925 3.32878 3.67065 3.25527 3.81438 3.2209M15.68 1.6001H15.6C15.2336 1.6001 14.9184 1.6001 14.64 1.6657C14.209 1.76868 13.8149 1.98897 13.5015 2.30216C13.188 2.61535 12.9673 3.00921 12.864 3.4401C12.8 3.7185 12.8 4.0321 12.8 4.4001V8.4001C12.8 8.7665 12.8 9.0817 12.8656 9.3601C12.9686 9.79108 13.1889 10.1851 13.502 10.4986C13.8152 10.8121 14.2091 11.0327 14.64 11.1361C14.9184 11.2001 15.232 11.2001 15.6 11.2001H19.6C19.9664 11.2001 20.2816 11.2001 20.56 11.1345C20.991 11.0315 21.385 10.8112 21.6985 10.498C22.012 10.1848 22.2326 9.79099 22.336 9.3601C22.4 9.0817 22.4 8.7681 22.4 8.4001V4.4001C22.4 4.0337 22.4 3.7185 22.3344 3.4401C22.2314 3.00912 22.0111 2.61506 21.6979 2.30159C21.3847 1.98812 20.9909 1.76747 20.56 1.6641C20.2816 1.6001 19.968 1.6001 19.6 1.6001H19.52H15.68ZM15.0128 3.2225C15.0816 3.2065 15.1888 3.2001 15.68 3.2001H19.52C20.0128 3.2001 20.1184 3.2049 20.1872 3.2225C20.3309 3.25687 20.4623 3.33038 20.5668 3.43487C20.6713 3.53937 20.7448 3.67077 20.7792 3.8145C20.7952 3.8817 20.8 3.9873 20.8 4.4801V8.3201C20.8 8.8129 20.7936 8.9185 20.7776 8.9873C20.7432 9.13103 20.6697 9.26242 20.5652 9.36692C20.4607 9.47142 20.3293 9.54493 20.1856 9.5793C20.1184 9.5953 20.0128 9.6001 19.52 9.6001H15.68C15.1872 9.6001 15.0816 9.5953 15.0128 9.5777C14.869 9.54333 14.7377 9.46982 14.6332 9.36532C14.5287 9.26082 14.4551 9.12943 14.4208 8.9857C14.4064 8.9201 14.4 8.8145 14.4 8.3201V4.4801C14.4 3.9873 14.4048 3.8817 14.4224 3.8129C14.4567 3.66917 14.5303 3.53777 14.6348 3.43327C14.7392 3.32878 14.8706 3.25527 15.0144 3.2209M4.39998 12.8001H8.39998C8.76638 12.8001 9.08158 12.8001 9.35998 12.8657C9.79096 12.9687 10.185 13.189 10.4985 13.5022C10.812 13.8153 11.0326 14.2092 11.136 14.6401C11.2 14.9185 11.2 15.2321 11.2 15.6001V19.6001C11.2 19.9665 11.2 20.2817 11.1344 20.5601C11.0314 20.9911 10.8111 21.3851 10.4979 21.6986C10.1847 22.0121 9.79087 22.2327 9.35998 22.3361C9.08158 22.4001 8.76798 22.4001 8.39998 22.4001H4.39998C4.03358 22.4001 3.71838 22.4001 3.43998 22.3345C3.00899 22.2315 2.61494 22.0112 2.30146 21.698C1.98799 21.3848 1.76735 20.991 1.66398 20.5601C1.59998 20.2817 1.59998 19.9681 1.59998 19.6001V15.6001C1.59998 15.2337 1.59998 14.9185 1.66558 14.6401C1.76856 14.2091 1.98885 13.8151 2.30204 13.5016C2.61523 13.1881 3.00909 12.9675 3.43998 12.8641C3.71838 12.8001 4.03198 12.8001 4.39998 12.8001ZM4.47998 14.4001C3.98718 14.4001 3.88158 14.4049 3.81278 14.4225C3.66905 14.4569 3.53765 14.5304 3.43315 14.6349C3.32866 14.7394 3.25515 14.8708 3.22078 15.0145C3.20638 15.0801 3.19998 15.1857 3.19998 15.6801V19.5201C3.19998 20.0129 3.20478 20.1185 3.22238 20.1873C3.25675 20.331 3.33026 20.4624 3.43475 20.5669C3.53925 20.6714 3.67065 20.7449 3.81438 20.7793C3.88158 20.7953 3.98718 20.8001 4.47998 20.8001H8.31998C8.81278 20.8001 8.91838 20.7937 8.98718 20.7777C9.1309 20.7433 9.2623 20.6698 9.3668 20.5653C9.4713 20.4608 9.54481 20.3294 9.57918 20.1857C9.59518 20.1185 9.59998 20.0129 9.59998 19.5201V15.6801C9.59998 15.1873 9.59518 15.0817 9.57758 15.0129C9.54321 14.8692 9.4697 14.7378 9.3652 14.6333C9.2607 14.5288 9.1293 14.4553 8.98558 14.4209C8.91998 14.4065 8.81438 14.4001 8.31998 14.4001H4.47998ZM15.68 12.8001H15.6C15.2336 12.8001 14.9184 12.8001 14.64 12.8657C14.209 12.9687 13.8149 13.189 13.5015 13.5022C13.188 13.8153 12.9673 14.2092 12.864 14.6401C12.8 14.9185 12.8 15.2321 12.8 15.6001V19.6001C12.8 19.9665 12.8 20.2817 12.8656 20.5601C12.9686 20.9911 13.1889 21.3851 13.502 21.6986C13.8152 22.0121 14.2091 22.2327 14.64 22.3361C14.9184 22.4017 15.2336 22.4017 15.6 22.4017H19.6C19.9664 22.4017 20.2816 22.4017 20.56 22.3361C20.9907 22.2329 21.3844 22.0124 21.6976 21.6993C22.0107 21.3861 22.2311 20.9924 22.3344 20.5617C22.4 20.2833 22.4 19.9681 22.4 19.6017V15.6001C22.4 15.2337 22.4 14.9185 22.3344 14.6401C22.2314 14.2091 22.0111 13.8151 21.6979 13.5016C21.3847 13.1881 20.9909 12.9675 20.56 12.8641C20.2816 12.8001 19.968 12.8001 19.6 12.8001H19.52H15.68ZM15.0128 14.4225C15.0816 14.4065 15.1888 14.4001 15.68 14.4001H19.52C20.0128 14.4001 20.1184 14.4049 20.1872 14.4225C20.3309 14.4569 20.4623 14.5304 20.5668 14.6349C20.6713 14.7394 20.7448 14.8708 20.7792 15.0145C20.7952 15.0817 20.8 15.1873 20.8 15.6801V19.5201C20.8 20.0129 20.7936 20.1185 20.7776 20.1873C20.7432 20.331 20.6697 20.4624 20.5652 20.5669C20.4607 20.6714 20.3293 20.7449 20.1856 20.7793C20.1184 20.7953 20.0128 20.8001 19.52 20.8001H15.68C15.1872 20.8001 15.0816 20.7937 15.0128 20.7777C14.869 20.7433 14.7377 20.6698 14.6332 20.5653C14.5287 20.4608 14.4551 20.3294 14.4208 20.1857C14.4064 20.1201 14.4 20.0145 14.4 19.5201V15.6801C14.4 15.1873 14.4048 15.0817 14.4224 15.0129C14.4567 14.8692 14.5303 14.7378 14.6348 14.6333C14.7392 14.5288 14.8706 14.4553 15.0144 14.4209" />
      <SideNavIcon :isExpanded="isExpanded" :isActive="isDevicesManagementActive" :route="{ name: 'devicesManagement' }"
        menuName="Devices Provisioning"
        path="M21.15 5.87273L12.9 1.3568C12.6243 1.20506 12.3147 1.12549 12 1.12549C11.6853 1.12549 11.3757 1.20506 11.1 1.3568L2.85 5.87273C2.5548 6.03425 2.3085 6.27224 2.13695 6.56173C1.9654 6.85122 1.87492 7.18154 1.875 7.51805V16.4824C1.87492 16.8189 1.9654 17.1492 2.13695 17.4387C2.3085 17.7282 2.5548 17.9662 2.85 18.1277L11.1 22.6437C11.3756 22.7956 11.6853 22.8752 12 22.8752C12.3147 22.8752 12.6244 22.7956 12.9 22.6437L21.15 18.1277C21.4452 17.9662 21.6915 17.7282 21.863 17.4387C22.0346 17.1492 22.1251 16.8189 22.125 16.4824V7.51805C22.1251 7.18154 22.0346 6.85122 21.863 6.56173C21.6915 6.27224 21.4452 6.03425 21.15 5.87273ZM12 3.42867L18.75 7.12523L12 10.819L5.25 7.12523L12 3.42867ZM4.125 9.0743L10.875 12.768V19.9559L4.125 16.2602V9.0743ZM13.125 19.9559V12.768L19.875 9.0743V16.2602L13.125 19.9559Z" />
      <SideNavIcon :isExpanded="isExpanded" :isActive="isMasterDataActive" :route="{ name: 'masterData' }"
        menuName="Master Data">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M17 3V21M3 7H7M3 12H7M3 17H7M13.5 22H19.5M13.5 2H19.5H20.3443C20.8966 2 21.3443 2.44772 21.3443 3V21C21.3443 21.5523 20.8966 22 20.3443 22H13.2H6.4C5.84771 22 5.4 21.5523 5.4 21V3C5.4 2.44772 5.84772 2 6.4 2H13.5Z"
            :class="{ 'stroke-accent-1': isMasterDataActive, 'stroke-label-secondary': !isMasterDataActive }"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </SideNavIcon>
    </div>
    <div class="sidebar-foot">
      <SideNavIcon @click="signOut" :route="{ name: 'login' }" menuName="Logout">
        <path
          d="M12.085 3.3418C11.9012 3.3418 11.725 3.41479 11.5951 3.54472C11.4652 3.67464 11.3922 3.85086 11.3922 4.03461C11.3922 4.21835 11.4652 4.39457 11.5951 4.5245C11.725 4.65443 11.9012 4.72742 12.085 4.72742C13.8612 4.72742 15.5646 5.43302 16.8206 6.68898C18.0766 7.94495 18.7822 9.6484 18.7822 11.4246C18.7822 13.2008 18.0766 14.9043 16.8206 16.1602C15.5646 17.4162 13.8612 18.1218 12.085 18.1218C11.9012 18.1218 11.725 18.1948 11.5951 18.3247C11.4652 18.4546 11.3922 18.6309 11.3922 18.8146C11.3922 18.9984 11.4652 19.1746 11.5951 19.3045C11.725 19.4344 11.9012 19.5074 12.085 19.5074C14.2287 19.5074 16.2846 18.6558 17.8004 17.14C19.3162 15.6242 20.1678 13.5683 20.1678 11.4246C20.1678 9.28091 19.3162 7.22502 17.8004 5.7092C16.2846 4.19338 14.2287 3.3418 12.085 3.3418Z" />
        <path
          d="M7.95583 9.14363C8.07821 9.0123 8.14483 8.83859 8.14166 8.65911C8.1385 8.47962 8.06579 8.30837 7.93885 8.18144C7.81192 8.0545 7.64067 7.98179 7.46118 7.97862C7.2817 7.97546 7.10799 8.04208 6.97665 8.16446L4.2054 10.9357C4.07566 11.0656 4.00279 11.2417 4.00279 11.4253C4.00279 11.6089 4.07566 11.785 4.2054 11.9149L6.97665 14.6861C7.04008 14.7542 7.11657 14.8088 7.20155 14.8467C7.28654 14.8845 7.37828 14.9049 7.4713 14.9065C7.56433 14.9082 7.65673 14.8911 7.74299 14.8562C7.82926 14.8214 7.90763 14.7695 7.97342 14.7037C8.0392 14.6379 8.09107 14.5596 8.12591 14.4733C8.16076 14.387 8.17787 14.2946 8.17623 14.2016C8.17459 14.1086 8.15423 14.0168 8.11636 13.9319C8.07849 13.8469 8.0239 13.7704 7.95583 13.707L6.36698 12.1181H13.9325C14.1162 12.1181 14.2925 12.0451 14.4224 11.9152C14.5523 11.7853 14.6253 11.609 14.6253 11.4253C14.6253 11.2416 14.5523 11.0653 14.4224 10.9354C14.2925 10.8055 14.1162 10.7325 13.9325 10.7325H6.36698L7.95583 9.14363Z" />
      </SideNavIcon>
    </div>
  </aside>
</template>

<script setup>
import { useAuthStore } from '@/stores/auth/auth-store'
import SideNavIcon from '@/components/navigation/SideNavIcon.vue'
import { onMounted, ref } from 'vue';
import { useThemeStore } from '@/stores/theme'
import { storeToRefs } from 'pinia';
import { useLocalStorage } from '@vueuse/core';
const { isDark } = storeToRefs(useThemeStore())

const props = defineProps({
  isDashboardActive: {
    type: Boolean,
    default: false
  },
  isDevicesManagementActive: {
    type: Boolean,
    default: false
  },
  isMasterDataActive: {
    type: Boolean,
    default: false
  }
})

const authStore = useAuthStore();
async function signOut() {
  await authStore.signOut();
}
const goBack = () => {
  router.go(-1);
}

const isExpanded = useLocalStorage('sideNavExpanded', false)

function expandSideNav() {
  isExpanded.value = !isExpanded.value
}


</script>

<style scoped>
.sidebar {
  @apply sticky h-screen w-[60px] py-[16px] items-center z-20 gap-10 top-0 left-0 border-r-2 flex flex-col justify-between transition-all ease-in-out duration-200 bg-bkg-primary border-label-tertiary
}


.sideBarExpanded {
  @apply w-[240px]
}

.sidebar-head {
  @apply flex flex-col justify-center items-start gap-5 w-full
}

.sidebar-body {
  @apply flex flex-col justify-center items-start gap-10 w-full overflow-x-hidden
}

.sidebar-body img {
  @apply h-8
}

.sidebar-foot {
  @apply flex justify-center items-start w-full flex-col gap-10 overflow-x-hidden
}

/* .expandButton {
  @apply w-6 h-6 cursor-pointer absolute z-20 left-[45px] top-[16px] transition-all duration-200 ease-in-out
} */
.expandButton {
  @apply w-6 h-6 cursor-pointer z-20 transition-all duration-200 ease-in-out flex items-center
}

.expandButtonExpanded {
  @apply rotate-180 left-[200px]
}
</style>